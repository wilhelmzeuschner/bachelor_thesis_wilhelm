<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>lmm_retrofit: src/lmm_basic_io.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">lmm_retrofit<span id="projectnumber">&#160;1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">lmm_basic_io.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;Arduino.h&quot;</code><br />
<code>#include &lt;EEPROM.h&gt;</code><br />
<code>#include &quot;lmm_pins.h&quot;</code><br />
<code>#include &quot;lmm_basic_io.h&quot;</code><br />
<code>#include &quot;lmm_uart_config.h&quot;</code><br />
<code>#include &quot;lmm_config.h&quot;</code><br />
<code>#include &quot;lmm_dac_sig.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for lmm_basic_io.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="lmm__basic__io_8cpp__incl.png" border="0" usemap="#asrc_2lmm__basic__io_8cpp" alt=""/></div>
<map name="asrc_2lmm__basic__io_8cpp" id="asrc_2lmm__basic__io_8cpp">
<area shape="rect" title=" " alt="" coords="317,5,467,32"/>
<area shape="rect" title=" " alt="" coords="5,80,83,107"/>
<area shape="rect" title=" " alt="" coords="107,80,197,107"/>
<area shape="rect" title=" " alt="" coords="222,80,311,107"/>
<area shape="rect" title=" " alt="" coords="335,80,449,107"/>
<area shape="rect" title=" " alt="" coords="473,80,601,107"/>
<area shape="rect" title=" " alt="" coords="625,80,724,107"/>
<area shape="rect" title=" " alt="" coords="749,80,859,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abe48a3b15d398790ff1849b3faefc79e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmm__basic__io_8cpp.html#abe48a3b15d398790ff1849b3faefc79e">initIOPins</a> ()</td></tr>
<tr class="memdesc:abe48a3b15d398790ff1849b3faefc79e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes all IO pins to their respective functions (input / output) and configures the relevant IO-interrupts.  <a href="lmm__basic__io_8cpp.html#abe48a3b15d398790ff1849b3faefc79e">More...</a><br /></td></tr>
<tr class="separator:abe48a3b15d398790ff1849b3faefc79e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ca12b3481773082d4996183a865873e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmm__basic__io_8cpp.html#a0ca12b3481773082d4996183a865873e">initUART</a> (uint8_t *activeLMMSlot)</td></tr>
<tr class="memdesc:a0ca12b3481773082d4996183a865873e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the UART port and sends some basic info about the program.  <a href="lmm__basic__io_8cpp.html#a0ca12b3481773082d4996183a865873e">More...</a><br /></td></tr>
<tr class="separator:a0ca12b3481773082d4996183a865873e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3bbfd48e1f9b1eec223ac2f18f26a9c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmm__basic__io_8cpp.html#aa3bbfd48e1f9b1eec223ac2f18f26a9c">handleButtons</a> (uint8_t *activeLMMSlot, uint8_t *ledState)</td></tr>
<tr class="memdesc:aa3bbfd48e1f9b1eec223ac2f18f26a9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the button presses Currently it's only used to select which profile for the characteristic curve is used There are 3 curves in total, see lmm_dac_sig.h for more information Button 2 advances to the next curve, Button 1 jumps back by one After the slot number has been changed, the LED blinks slot number-times.  <a href="lmm__basic__io_8cpp.html#aa3bbfd48e1f9b1eec223ac2f18f26a9c">More...</a><br /></td></tr>
<tr class="separator:aa3bbfd48e1f9b1eec223ac2f18f26a9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3c19b428eb5c0de942dd545f88186af"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmm__basic__io_8cpp.html#ad3c19b428eb5c0de942dd545f88186af">setLEDs</a> (uint8_t *ledState)</td></tr>
<tr class="memdesc:ad3c19b428eb5c0de942dd545f88186af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the LEDs On or Off.  <a href="lmm__basic__io_8cpp.html#ad3c19b428eb5c0de942dd545f88186af">More...</a><br /></td></tr>
<tr class="separator:ad3c19b428eb5c0de942dd545f88186af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee9575f98e70a11b448eeb07f7fc1916"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmm__basic__io_8cpp.html#aee9575f98e70a11b448eeb07f7fc1916">measureVBATTmV</a> ()</td></tr>
<tr class="memdesc:aee9575f98e70a11b448eeb07f7fc1916"><td class="mdescLeft">&#160;</td><td class="mdescRight">measures the board's supply voltage in mV  <a href="lmm__basic__io_8cpp.html#aee9575f98e70a11b448eeb07f7fc1916">More...</a><br /></td></tr>
<tr class="separator:aee9575f98e70a11b448eeb07f7fc1916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e23c9421f6663303ea22e4969e2f6c1"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmm__basic__io_8cpp.html#a8e23c9421f6663303ea22e4969e2f6c1">readVcc</a> ()</td></tr>
<tr class="memdesc:a8e23c9421f6663303ea22e4969e2f6c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the supply voltage of the IC using the internal 1.1V reference. Source: <a href="https://code.google.com/archive/p/tinkerit/wikis/SecretVoltmeter.wiki">https://code.google.com/archive/p/tinkerit/wikis/SecretVoltmeter.wiki</a> This function is inherently slow because of the built in delay of 2 ms!  <a href="lmm__basic__io_8cpp.html#a8e23c9421f6663303ea22e4969e2f6c1">More...</a><br /></td></tr>
<tr class="separator:a8e23c9421f6663303ea22e4969e2f6c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19bf620bc35271ed05e3063f0c81e652"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmm__basic__io_8cpp.html#a19bf620bc35271ed05e3063f0c81e652">buttonOneISR</a> ()</td></tr>
<tr class="memdesc:a19bf620bc35271ed05e3063f0c81e652"><td class="mdescLeft">&#160;</td><td class="mdescRight">ISR for a pushbutton, sets a global flag that is read by the main loop.  <a href="lmm__basic__io_8cpp.html#a19bf620bc35271ed05e3063f0c81e652">More...</a><br /></td></tr>
<tr class="separator:a19bf620bc35271ed05e3063f0c81e652"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca3c49d8a19d1ba145c46494a2d77041"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmm__basic__io_8cpp.html#aca3c49d8a19d1ba145c46494a2d77041">buttonTwoISR</a> ()</td></tr>
<tr class="memdesc:aca3c49d8a19d1ba145c46494a2d77041"><td class="mdescLeft">&#160;</td><td class="mdescRight">ISR for a pushbutton, sets a global flag that is read by the main loop.  <a href="lmm__basic__io_8cpp.html#aca3c49d8a19d1ba145c46494a2d77041">More...</a><br /></td></tr>
<tr class="separator:aca3c49d8a19d1ba145c46494a2d77041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b8d379b893c8acae82ca70f8284f4be"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmm__basic__io_8cpp.html#a6b8d379b893c8acae82ca70f8284f4be">checkForLMMErrors</a> (uint8_t *ledState)</td></tr>
<tr class="memdesc:a6b8d379b893c8acae82ca70f8284f4be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifies that all conditions are met and the board can work correctly Blinks the ERR LED if errors are found This function needs to be called continuously, otherwise the ERR LED might get stuck on 1.  <a href="lmm__basic__io_8cpp.html#a6b8d379b893c8acae82ca70f8284f4be">More...</a><br /></td></tr>
<tr class="separator:a6b8d379b893c8acae82ca70f8284f4be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a847dc30b8e3175fad5ad5cd1b6861f0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmm__basic__io_8cpp.html#a847dc30b8e3175fad5ad5cd1b6861f0b">setRelay</a> (uint16_t *airADCVal)</td></tr>
<tr class="memdesc:a847dc30b8e3175fad5ad5cd1b6861f0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turns the relay either on or off based on the measured airflow. The threshold value and hysteresis is set in lmm_config.h.  <a href="lmm__basic__io_8cpp.html#a847dc30b8e3175fad5ad5cd1b6861f0b">More...</a><br /></td></tr>
<tr class="separator:a847dc30b8e3175fad5ad5cd1b6861f0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad737de46e889f683f418f0637370b02c"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmm__basic__io_8cpp.html#ad737de46e889f683f418f0637370b02c">btnPressState</a></td></tr>
<tr class="separator:ad737de46e889f683f418f0637370b02c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a19bf620bc35271ed05e3063f0c81e652" name="a19bf620bc35271ed05e3063f0c81e652"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19bf620bc35271ed05e3063f0c81e652">&#9670;&nbsp;</a></span>buttonOneISR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buttonOneISR </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ISR for a pushbutton, sets a global flag that is read by the main loop. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-</dd></dl>
<dl class="section version"><dt>Version</dt><dd>- </dd></dl>

</div>
</div>
<a id="aca3c49d8a19d1ba145c46494a2d77041" name="aca3c49d8a19d1ba145c46494a2d77041"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca3c49d8a19d1ba145c46494a2d77041">&#9670;&nbsp;</a></span>buttonTwoISR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buttonTwoISR </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ISR for a pushbutton, sets a global flag that is read by the main loop. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-</dd></dl>
<dl class="section version"><dt>Version</dt><dd>- </dd></dl>

</div>
</div>
<a id="a6b8d379b893c8acae82ca70f8284f4be" name="a6b8d379b893c8acae82ca70f8284f4be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b8d379b893c8acae82ca70f8284f4be">&#9670;&nbsp;</a></span>checkForLMMErrors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t checkForLMMErrors </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>ledState</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verifies that all conditions are met and the board can work correctly Blinks the ERR LED if errors are found This function needs to be called continuously, otherwise the ERR LED might get stuck on 1. </p>
<p >Checklist: if condition is NOT met:</p><ul>
<li>input voltage within spec return: bit 1 set</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0: no problems != 0: issues present (see above) </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lmm__basic__io_8cpp_a6b8d379b893c8acae82ca70f8284f4be_cgraph.png" border="0" usemap="#almm__basic__io_8cpp_a6b8d379b893c8acae82ca70f8284f4be_cgraph" alt=""/></div>
<map name="almm__basic__io_8cpp_a6b8d379b893c8acae82ca70f8284f4be_cgraph" id="almm__basic__io_8cpp_a6b8d379b893c8acae82ca70f8284f4be_cgraph">
<area shape="rect" title="Verifies that all conditions are met and the board can work correctly Blinks the ERR LED if errors ar..." alt="" coords="5,31,145,57"/>
<area shape="rect" href="lmm__basic__io_8cpp.html#aee9575f98e70a11b448eeb07f7fc1916" title="measures the board&#39;s supply voltage in mV" alt="" coords="193,5,327,32"/>
<area shape="rect" href="lmm__basic__io_8cpp.html#ad3c19b428eb5c0de942dd545f88186af" title="Sets the LEDs On or Off." alt="" coords="224,56,296,83"/>
<area shape="rect" href="lmm__basic__io_8cpp.html#a8e23c9421f6663303ea22e4969e2f6c1" title="Calculates the supply voltage of the IC using the internal 1.1V reference. Source: https://code...." alt="" coords="375,5,445,32"/>
</map>
</div>

</div>
</div>
<a id="aa3bbfd48e1f9b1eec223ac2f18f26a9c" name="aa3bbfd48e1f9b1eec223ac2f18f26a9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3bbfd48e1f9b1eec223ac2f18f26a9c">&#9670;&nbsp;</a></span>handleButtons()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleButtons </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>activeLMMSlot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>ledState</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the button presses Currently it's only used to select which profile for the characteristic curve is used There are 3 curves in total, see lmm_dac_sig.h for more information Button 2 advances to the next curve, Button 1 jumps back by one After the slot number has been changed, the LED blinks slot number-times. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">activeLMMSlot</td><td>this is the currently active slot number</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Implement a guard against pressing the button (i.e. changing the profile) while the car is running? But where does the board get it's power from then?</dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lmm__basic__io_8cpp_aa3bbfd48e1f9b1eec223ac2f18f26a9c_cgraph.png" border="0" usemap="#almm__basic__io_8cpp_aa3bbfd48e1f9b1eec223ac2f18f26a9c_cgraph" alt=""/></div>
<map name="almm__basic__io_8cpp_aa3bbfd48e1f9b1eec223ac2f18f26a9c_cgraph" id="almm__basic__io_8cpp_aa3bbfd48e1f9b1eec223ac2f18f26a9c_cgraph">
<area shape="rect" title="Handles the button presses Currently it&#39;s only used to select which profile for the characteristic cu..." alt="" coords="5,5,111,32"/>
<area shape="rect" href="lmm__basic__io_8cpp.html#ad3c19b428eb5c0de942dd545f88186af" title="Sets the LEDs On or Off." alt="" coords="159,5,231,32"/>
</map>
</div>

</div>
</div>
<a id="abe48a3b15d398790ff1849b3faefc79e" name="abe48a3b15d398790ff1849b3faefc79e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe48a3b15d398790ff1849b3faefc79e">&#9670;&nbsp;</a></span>initIOPins()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initIOPins </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes all IO pins to their respective functions (input / output) and configures the relevant IO-interrupts. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lmm__basic__io_8cpp_abe48a3b15d398790ff1849b3faefc79e_cgraph.png" border="0" usemap="#almm__basic__io_8cpp_abe48a3b15d398790ff1849b3faefc79e_cgraph" alt=""/></div>
<map name="almm__basic__io_8cpp_abe48a3b15d398790ff1849b3faefc79e_cgraph" id="almm__basic__io_8cpp_abe48a3b15d398790ff1849b3faefc79e_cgraph">
<area shape="rect" title="Initializes all IO pins to their respective functions (input / output) and configures the relevant IO..." alt="" coords="5,31,84,57"/>
<area shape="rect" href="lmm__basic__io_8cpp.html#a19bf620bc35271ed05e3063f0c81e652" title="ISR for a pushbutton, sets a global flag that is read by the main loop." alt="" coords="132,5,235,32"/>
<area shape="rect" href="lmm__basic__io_8cpp.html#aca3c49d8a19d1ba145c46494a2d77041" title="ISR for a pushbutton, sets a global flag that is read by the main loop." alt="" coords="132,56,235,83"/>
</map>
</div>

</div>
</div>
<a id="a0ca12b3481773082d4996183a865873e" name="a0ca12b3481773082d4996183a865873e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ca12b3481773082d4996183a865873e">&#9670;&nbsp;</a></span>initUART()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initUART </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>activeLMMSlot</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the UART port and sends some basic info about the program. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- </dd></dl>

</div>
</div>
<a id="aee9575f98e70a11b448eeb07f7fc1916" name="aee9575f98e70a11b448eeb07f7fc1916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee9575f98e70a11b448eeb07f7fc1916">&#9670;&nbsp;</a></span>measureVBATTmV()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t measureVBATTmV </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>measures the board's supply voltage in mV </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lmm__basic__io_8cpp_aee9575f98e70a11b448eeb07f7fc1916_cgraph.png" border="0" usemap="#almm__basic__io_8cpp_aee9575f98e70a11b448eeb07f7fc1916_cgraph" alt=""/></div>
<map name="almm__basic__io_8cpp_aee9575f98e70a11b448eeb07f7fc1916_cgraph" id="almm__basic__io_8cpp_aee9575f98e70a11b448eeb07f7fc1916_cgraph">
<area shape="rect" title="measures the board&#39;s supply voltage in mV" alt="" coords="5,5,139,32"/>
<area shape="rect" href="lmm__basic__io_8cpp.html#a8e23c9421f6663303ea22e4969e2f6c1" title="Calculates the supply voltage of the IC using the internal 1.1V reference. Source: https://code...." alt="" coords="187,5,257,32"/>
</map>
</div>

</div>
</div>
<a id="a8e23c9421f6663303ea22e4969e2f6c1" name="a8e23c9421f6663303ea22e4969e2f6c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e23c9421f6663303ea22e4969e2f6c1">&#9670;&nbsp;</a></span>readVcc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long readVcc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the supply voltage of the IC using the internal 1.1V reference. Source: <a href="https://code.google.com/archive/p/tinkerit/wikis/SecretVoltmeter.wiki">https://code.google.com/archive/p/tinkerit/wikis/SecretVoltmeter.wiki</a> This function is inherently slow because of the built in delay of 2 ms! </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>result: Supply voltage of the IC in mV</dd></dl>
<dl class="section version"><dt>Version</dt><dd>- </dd></dl>

</div>
</div>
<a id="ad3c19b428eb5c0de942dd545f88186af" name="ad3c19b428eb5c0de942dd545f88186af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3c19b428eb5c0de942dd545f88186af">&#9670;&nbsp;</a></span>setLEDs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setLEDs </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>ledState</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the LEDs On or Off. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ledState</td><td>Bit 0 -&gt; LED_1, Bit 1 -&gt; LED_2, Bit 3 -&gt; LED_ERR</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- </dd></dl>

</div>
</div>
<a id="a847dc30b8e3175fad5ad5cd1b6861f0b" name="a847dc30b8e3175fad5ad5cd1b6861f0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a847dc30b8e3175fad5ad5cd1b6861f0b">&#9670;&nbsp;</a></span>setRelay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setRelay </td>
          <td>(</td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>airADCVal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turns the relay either on or off based on the measured airflow. The threshold value and hysteresis is set in lmm_config.h. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">airADCVal</td><td>current ADC reading of the electronic sensor</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad737de46e889f683f418f0637370b02c" name="ad737de46e889f683f418f0637370b02c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad737de46e889f683f418f0637370b02c">&#9670;&nbsp;</a></span>btnPressState</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t btnPressState</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
